<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philosophy | Jaehyun Park</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="list.css">
</head>
<body>
    <!-- Top Header -->
    <header class="top-header">
        <div class="header-left">
            <a href="index.html" class="header-logo">Jaehyun Park</a>
            <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                <span class="toggle-icon">&#9776;</span>
            </button>
        </div>
    </header>

    <!-- Theme Toggle (Bottom Right) -->
    <button class="theme-toggle-fixed" id="themeToggle" aria-label="Toggle theme">
        <span class="theme-icon">◐</span>
    </button>

    <div class="page-layout">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="about.html" class="sidebar-link">About</a>
                <a href="philosophy.html" class="sidebar-link active">Philosophy</a>
                <a href="blog.html" class="sidebar-link">Blog</a>
                <a href="projects.html" class="sidebar-link">Projects</a>
                <a href="publications.html" class="sidebar-link">Publications</a>
                <a href="tmi.html" class="sidebar-link">TMI</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-container">
                <h1 class="page-title" id="pageTitle">All</h1>

                <!-- Controls Row -->
                <div class="controls-row">
                    <div class="category-tabs">
                        <button class="category-tab" data-category="research">Research</button>
                        <button class="category-tab" data-category="mathematics">Mathematics</button>
                        <button class="category-tab" data-category="applications">Applications</button>
                        <button class="category-tab active" data-category="all">All</button>
                    </div>

                    <div class="right-controls">
                        <!-- Filter Dropdown -->
                        <div class="dropdown-container">
                            <button class="dropdown-btn" id="filterBtn">
                                Filter
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="4" y1="6" x2="20" y2="6"/>
                                    <line x1="4" y1="12" x2="14" y2="12"/>
                                    <line x1="4" y1="18" x2="8" y2="18"/>
                                </svg>
                            </button>
                            <div class="dropdown-menu filter-menu" id="filterMenu">
                                <div class="filter-column">
                                    <h4>Topic</h4>
                                    <div class="filter-option">
                                        <input type="checkbox" id="topic-research" value="research">
                                        <label for="topic-research">Research</label>
                                    </div>
                                    <div class="filter-option">
                                        <input type="checkbox" id="topic-mathematics" value="mathematics">
                                        <label for="topic-mathematics">Mathematics</label>
                                    </div>
                                    <div class="filter-option">
                                        <input type="checkbox" id="topic-applications" value="applications">
                                        <label for="topic-applications">Applications</label>
                                    </div>
                                </div>
                                <div class="filter-column">
                                    <h4>Year</h4>
                                    <div class="filter-option">
                                        <input type="checkbox" id="year-2025" value="2025">
                                        <label for="year-2025">2025</label>
                                    </div>
                                    <div class="filter-option">
                                        <input type="checkbox" id="year-2024" value="2024">
                                        <label for="year-2024">2024</label>
                                    </div>
                                </div>
                                <div class="filter-footer">
                                    <button class="filter-cancel" id="filterCancel">Cancel</button>
                                </div>
                            </div>
                        </div>

                        <!-- Sort Dropdown -->
                        <div class="dropdown-container">
                            <button class="dropdown-btn" id="sortBtn">
                                Sort
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M6 9l6 6 6-6"/>
                                </svg>
                            </button>
                            <div class="dropdown-menu sort-menu" id="sortMenu">
                                <div class="sort-option">
                                    <input type="radio" name="sort" id="sort-newest" value="newest" checked>
                                    <label for="sort-newest">Newest → Oldest</label>
                                </div>
                                <div class="sort-option">
                                    <input type="radio" name="sort" id="sort-oldest" value="oldest">
                                    <label for="sort-oldest">Oldest → Newest</label>
                                </div>
                            </div>
                        </div>

                        <!-- View Toggle -->
                        <div class="view-toggle">
                            <button class="view-btn active" id="gridViewBtn" aria-label="Grid view">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <rect x="3" y="3" width="7" height="7" rx="1"/>
                                    <rect x="14" y="3" width="7" height="7" rx="1"/>
                                    <rect x="3" y="14" width="7" height="7" rx="1"/>
                                    <rect x="14" y="14" width="7" height="7" rx="1"/>
                                </svg>
                            </button>
                            <button class="view-btn" id="listViewBtn" aria-label="List view">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="3" y1="6" x2="21" y2="6"/>
                                    <line x1="3" y1="12" x2="21" y2="12"/>
                                    <line x1="3" y1="18" x2="21" y2="18"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Grid View -->
                <div class="posts-grid" id="postsGrid">
                    <a href="philosophy/on-research.html" class="post-card" data-category="research">
                        <div class="card-image-wrapper">
                            <div class="card-placeholder" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);"></div>
                        </div>
                        <div class="card-content">
                            <h2 class="card-title">On Research</h2>
                            <div class="card-meta">
                                <span class="card-category">Research</span>
                                <span class="card-date">Jan 2025</span>
                            </div>
                        </div>
                    </a>

                    <a href="philosophy/on-mathematics.html" class="post-card" data-category="mathematics">
                        <div class="card-image-wrapper">
                            <div class="card-placeholder" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                        </div>
                        <div class="card-content">
                            <h2 class="card-title">On Mathematics</h2>
                            <div class="card-meta">
                                <span class="card-category">Mathematics</span>
                                <span class="card-date">Dec 2024</span>
                            </div>
                        </div>
                    </a>

                    <a href="philosophy/on-applications.html" class="post-card" data-category="applications">
                        <div class="card-image-wrapper">
                            <div class="card-placeholder" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);"></div>
                        </div>
                        <div class="card-content">
                            <h2 class="card-title">On Applications</h2>
                            <div class="card-meta">
                                <span class="card-category">Applications</span>
                                <span class="card-date">Nov 2024</span>
                            </div>
                        </div>
                    </a>

                    <a href="philosophy/questions.html" class="post-card" data-category="research">
                        <div class="card-image-wrapper">
                            <div class="card-placeholder" style="background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);"></div>
                        </div>
                        <div class="card-content">
                            <h2 class="card-title">Questions I Keep Returning To</h2>
                            <div class="card-meta">
                                <span class="card-category">Research</span>
                                <span class="card-date">Oct 2024</span>
                            </div>
                        </div>
                    </a>
                </div>

                <!-- List View -->
                <div class="posts-list" id="postsList">
                    <a href="philosophy/on-research.html" class="post-row" data-category="research">
                        <div class="row-meta">
                            <span class="row-category">Research</span>
                            <span class="row-date">Jan 2025</span>
                        </div>
                        <div class="row-content">
                            <h2 class="row-title">On Research</h2>
                            <p class="row-excerpt">What drives me? What kind of problems excite me? How do I approach mathematical thinking?</p>
                        </div>
                    </a>

                    <a href="philosophy/on-mathematics.html" class="post-row" data-category="mathematics">
                        <div class="row-meta">
                            <span class="row-category">Mathematics</span>
                            <span class="row-date">Dec 2024</span>
                        </div>
                        <div class="row-content">
                            <h2 class="row-title">On Mathematics</h2>
                            <p class="row-excerpt">Is mathematics discovery or invention? What role does beauty play in my work?</p>
                        </div>
                    </a>

                    <a href="philosophy/on-applications.html" class="post-row" data-category="applications">
                        <div class="row-meta">
                            <span class="row-category">Applications</span>
                            <span class="row-date">Nov 2024</span>
                        </div>
                        <div class="row-content">
                            <h2 class="row-title">On Applications</h2>
                            <p class="row-excerpt">The relationship between theory and practice. What makes a good application of mathematics?</p>
                        </div>
                    </a>

                    <a href="philosophy/questions.html" class="post-row" data-category="research">
                        <div class="row-meta">
                            <span class="row-category">Research</span>
                            <span class="row-date">Oct 2024</span>
                        </div>
                        <div class="row-content">
                            <h2 class="row-title">Questions I Keep Returning To</h2>
                            <p class="row-excerpt">The questions that keep me up at night, the ones I find myself returning to again and again.</p>
                        </div>
                    </a>
                </div>
            </div>
        </main>
    </div>

    <footer class="copyright-footer">© Jaehyun Park</footer>

    <script src="script.js"></script>
    <script>
        const categoryTabs = document.querySelectorAll('.category-tab');
        const pageTitle = document.getElementById('pageTitle');
        const postsGrid = document.getElementById('postsGrid');
        const postsList = document.getElementById('postsList');

        // Parse date from text like "Jan 2025" or "Dec 2024"
        function parseDate(dateStr) {
            return new Date(dateStr);
        }

        // Get current active category
        function getActiveCategory() {
            const activeTab = document.querySelector('.category-tab.active');
            return activeTab ? activeTab.dataset.category : 'all';
        }

        // Get current filter settings
        function getFilters() {
            const topics = [];
            const years = [];
            document.querySelectorAll('#filterMenu input[type="checkbox"]:checked').forEach(cb => {
                if (cb.id.startsWith('topic-')) topics.push(cb.value);
                if (cb.id.startsWith('year-')) years.push(cb.value);
            });
            return { topics, years };
        }

        // Get current sort order
        function getSortOrder() {
            const checked = document.querySelector('input[name="sort"]:checked');
            return checked ? checked.value : 'newest';
        }

        // Apply all filters and sorting
        function applyFiltersAndSort() {
            const category = getActiveCategory();
            const { topics, years } = getFilters();
            const sortOrder = getSortOrder();

            const cards = Array.from(postsGrid.querySelectorAll('.post-card'));
            const rows = Array.from(postsList.querySelectorAll('.post-row'));

            // Filter function
            function shouldShow(el) {
                const elCategory = el.dataset.category;
                const dateText = el.querySelector('.card-date, .row-date')?.textContent || '';
                const year = dateText.match(/\d{4}/)?.[0] || '';

                // Category filter (from tabs)
                if (category !== 'all' && elCategory !== category) return false;

                // Topic filter (from checkboxes)
                if (topics.length > 0 && !topics.includes(elCategory)) return false;

                // Year filter
                if (years.length > 0 && !years.includes(year)) return false;

                return true;
            }

            // Sort function
            function sortByDate(a, b) {
                const dateA = parseDate(a.querySelector('.card-date, .row-date')?.textContent || '');
                const dateB = parseDate(b.querySelector('.card-date, .row-date')?.textContent || '');
                return sortOrder === 'newest' ? dateB - dateA : dateA - dateB;
            }

            // Sort cards and rows
            cards.sort(sortByDate);
            rows.sort(sortByDate);

            // Re-append in sorted order and apply visibility
            cards.forEach(card => {
                postsGrid.appendChild(card);
                card.style.display = shouldShow(card) ? 'block' : 'none';
            });

            rows.forEach(row => {
                postsList.appendChild(row);
                row.style.display = shouldShow(row) ? 'grid' : 'none';
            });
        }

        // Category tabs
        categoryTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                categoryTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const category = tab.dataset.category;
                pageTitle.textContent = category === 'all' ? 'All' : tab.textContent;
                applyFiltersAndSort();
            });
        });

        // View toggle
        const gridViewBtn = document.getElementById('gridViewBtn');
        const listViewBtn = document.getElementById('listViewBtn');

        gridViewBtn.addEventListener('click', () => {
            gridViewBtn.classList.add('active');
            listViewBtn.classList.remove('active');
            postsGrid.classList.remove('hidden');
            postsList.classList.remove('active');
        });

        listViewBtn.addEventListener('click', () => {
            listViewBtn.classList.add('active');
            gridViewBtn.classList.remove('active');
            postsGrid.classList.add('hidden');
            postsList.classList.add('active');
        });

        // Dropdown controls
        const filterBtn = document.getElementById('filterBtn');
        const filterMenu = document.getElementById('filterMenu');
        const filterCancel = document.getElementById('filterCancel');
        const sortBtn = document.getElementById('sortBtn');
        const sortMenu = document.getElementById('sortMenu');

        filterBtn.addEventListener('click', (e) => { e.stopPropagation(); filterMenu.classList.toggle('open'); sortMenu.classList.remove('open'); });
        sortBtn.addEventListener('click', (e) => { e.stopPropagation(); sortMenu.classList.toggle('open'); filterMenu.classList.remove('open'); });
        filterCancel.addEventListener('click', () => { filterMenu.classList.remove('open'); });
        document.addEventListener('click', () => { filterMenu.classList.remove('open'); sortMenu.classList.remove('open'); });
        filterMenu.addEventListener('click', (e) => e.stopPropagation());
        sortMenu.addEventListener('click', (e) => e.stopPropagation());

        // Sort radio buttons
        document.querySelectorAll('input[name="sort"]').forEach(radio => {
            radio.addEventListener('change', () => {
                applyFiltersAndSort();
                sortMenu.classList.remove('open');
            });
        });

        // Filter checkboxes
        document.querySelectorAll('#filterMenu input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', applyFiltersAndSort);
        });

        // Initial sort on page load
        applyFiltersAndSort();
    </script>
</body>
</html>
